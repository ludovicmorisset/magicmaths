services:
  MagicMaths:
    image: ${MATHS_APP_IMAGE:-mathematiques:local}
    build:
      context: .
      dockerfile: Dockerfile
    container_name: MagicMaths
    labels:
      glance.name: MagicMaths
      glance.description: "Une application de mathématiques pour les étudiants"
      glance.version: "1.0.0"
      glance.icon: si:libreofficemath
      glance.url: https://maths.tessirom.fr
    ports:
      - "1987:80"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--spider", "http://localhost/healthz"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s
    networks:
      - reseau_interne

networks:
  reseau_interne:
    external: true
